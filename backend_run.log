2025/04/12 17:59:10 Current working directory: C:\Users\user\Documents\dev\news_filter\newbalancer_go
2025/04/12 17:59:10 [RSS] Scheduler started, fetching every 30 minutes
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (3 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (3 handlers)
[GIN-debug] GET    /healthz                  --> main.main.func1 (3 handlers)
[GIN-debug] GET    /api/articles             --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.getArticlesHandler.func1 (3 handlers)
[GIN-debug] GET    /api/articles/:id         --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.getArticleByIDHandler.func2 (3 handlers)
[GIN-debug] POST   /api/refresh              --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.refreshHandler.func3 (3 handlers)
[GIN-debug] POST   /api/llm/reanalyze/:id    --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.reanalyzeHandler.func4 (3 handlers)
[GIN-debug] GET    /api/articles/:id/summary --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.summaryHandler.func5 (3 handlers)
[GIN-debug] GET    /api/articles/:id/bias    --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.biasHandler.func6 (3 handlers)
[GIN-debug] GET    /api/articles/:id/ensemble --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.ensembleDetailsHandler.func7 (3 handlers)
[GIN-debug] POST   /api/feedback             --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.feedbackHandler.func8 (3 handlers)
[GIN-debug] GET    /api/feeds/healthz        --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.feedHealthHandler.func9 (3 handlers)
[GIN-debug] GET    /api/llm/score-progress/:id --> github.com/alexandru-savinov/BalancedNewsGo/internal/api.RegisterRoutes.scoreProgressSSEHandler.func10 (3 handlers)
[GIN-debug] GET    /articles                 --> main.main.articlesHandler.func9 (3 handlers)
[GIN-debug] GET    /article/:id              --> main.main.articleDetailHandler.func10 (3 handlers)
[GIN-debug] GET    /metrics/validation       --> main.main.func2 (3 handlers)
[GIN-debug] GET    /metrics/feedback         --> main.main.func3 (3 handlers)
[GIN-debug] GET    /metrics/uncertainty      --> main.main.func4 (3 handlers)
[GIN-debug] GET    /metrics/disagreements    --> main.main.func5 (3 handlers)
[GIN-debug] GET    /metrics/outliers         --> main.main.func6 (3 handlers)
[GIN-debug] GET    /                         --> main.main.func7 (3 handlers)
2025/04/12 17:59:10 Server running on :8080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :8080
2025/04/12 17:59:10 Reprocessing failed articles...
[GIN] 2025/04/12 - 17:59:28 | 200 |        84.2ms |       127.0.0.1 | GET      "/"
2025/04/12 17:59:29 [PERF] getArticlesHandler took 8.6364ms
[GIN] 2025/04/12 - 17:59:29 | 200 |      8.6364ms |       127.0.0.1 | GET      "/api/articles?source=&leaning=&offset=0"
[GIN] 2025/04/12 - 17:59:29 | 404 |            0s |       127.0.0.1 | GET      "/favicon.ico"
[GIN] 2025/04/12 - 17:59:31 | 200 |       7.247ms |       127.0.0.1 | POST     "/api/llm/reanalyze/1680"
2025/04/12 17:59:31 [analyzeContent] Entry: articleID=1680, model=openai/gpt-3.5-turbo
2025/04/12 17:59:31 [analyzeContent] Entry: articleID=1680, model=openai/gpt-3.5-turbo
2025/04/12 17:59:31 Prompt snippet [9e4fff15493e3c2b] (attempt 1): Please analyze the political bias of the following article on a scale from -1.0 ...
2025/04/12 17:59:31 [openrouter Request] Headers: Content-Type=application/json, Authorization=Bearer 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...c49e
2025/04/12 17:59:31 [openrouter Request] Body: {"max_tokens":300,"messages":[{"content":"Please analyze the political bias of the following article on a scale from -1.0 (strongly left) to 1.0 (strongly right). Respond ONLY with a valid JSON object containing 'score', 'explanation', and 'confidence'. Do not include any other text or formatting.\n{\"score\": -1.0, \"explanation\": \"Strongly left-leaning language\", \"confidence\": 0.9}\n{\"score\": 0.0, \"explanation\": \"Neutral reporting\", \"confidence\": 0.95}\n{\"score\": 1.0, \"explanation\": \"Strongly right-leaning language\", \"confidence\": 0.9}\nArticle:\n\u003cp\u003eTrump’s tariffs were sometimes played down, sometimes cheered but rarely seriously questioned by the right\u003c/p\u003e\u003cp\u003eWhile \u003ca href=\"https://www.theguardian.com/us-news/donaldtrump\"\u003eDonald Trump\u003c/a\u003e recently instituted and paused hefty tariffs, sparking a trade war and chaos in financial markets, most of the country’s conservative media either applauded the US president or critiqued the policy but not the person behind it, according to journalists and observers of conservative media.\u003c/p\u003e\u003cp\u003eMeanwhile, economists, business leaders, Democrats and even some Republicans warned that the tariffs, which prompted the largest \u003ca href=\"https://www.theguardian.com/business/2025/apr/08/how-liberation-day-rout-compares-with-other-notorious-stock-market-crises\"\u003eAmerican stock market drop\u003c/a\u003e since the start of the Covid-19 pandemic, could cause a recession.\u003c/p\u003e \u003ca href=\"https://www.theguardian.com/us-news/2025/apr/12/trump-tariffs-rightwing-media-fox-news\"\u003eContinue reading...\u003c/a\u003e","role":"user"}],"model":"openai/gpt-3.5-turbo","temperature":0.7}
2025/04/12 17:59:31 [openrouter Request] POST URL: https://openrouter.ai/api/v1/chat/completions | Model in Payload: openai/gpt-3.5-turbo
2025/04/12 17:59:33 [openrouter] Raw Response Status: 200 OK
2025/04/12 17:59:33 [openrouter] Raw Response Body: {"id":"gen-1744469973-G8rF7sqq34poT8NdqPIi","provider":"OpenAI","model":"openai/gpt-3.5-turbo","object":"chat.completion","created":1744469973,"choices":[{"logprobs":null,"finish_reason":"stop","native_finish_reason":"stop","index":0,"message":{"role":"assistant","content":"{\"score\": -1.0, \"explanation\": \"Strongly left-leaning language\", \"confidence\": 0.9}","refusal":null,"reasoning":null}}],"system_fingerprint":null,"usage":{"prompt_tokens":368,"completion_tokens":28,"total_tokens":396,"prompt_tokens_details":{"cached_tokens":0},"completion_tokens_details":{"reasoning_tokens":0}}}
2025/04/12 17:59:33 [LLM] ArticleID 1680 | Model openai/gpt-3.5-turbo | PromptHash 9e4fff15493e3c2b | Success | Score: -1.000 | Confidence: 0.900
2025/04/12 17:59:33 [reanalyzeHandler 1680] Model openai/gpt-3.5-turbo scoring result: err=<nil>
2025/04/12 17:59:33 [analyzeContent] Entry: articleID=1680, model=mistralai/mistral-7b-instruct:free
2025/04/12 17:59:33 [analyzeContent] Entry: articleID=1680, model=mistralai/mistral-7b-instruct:free
2025/04/12 17:59:33 Prompt snippet [9e4fff15493e3c2b] (attempt 1): Please analyze the political bias of the following article on a scale from -1.0 ...
2025/04/12 17:59:33 [openrouter Request] Headers: Content-Type=application/json, Authorization=Bearer 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...c49e
2025/04/12 17:59:33 [openrouter Request] Body: {"max_tokens":300,"messages":[{"content":"Please analyze the political bias of the following article on a scale from -1.0 (strongly left) to 1.0 (strongly right). Respond ONLY with a valid JSON object containing 'score', 'explanation', and 'confidence'. Do not include any other text or formatting.\n{\"score\": -1.0, \"explanation\": \"Strongly left-leaning language\", \"confidence\": 0.9}\n{\"score\": 0.0, \"explanation\": \"Neutral reporting\", \"confidence\": 0.95}\n{\"score\": 1.0, \"explanation\": \"Strongly right-leaning language\", \"confidence\": 0.9}\nArticle:\n\u003cp\u003eTrump’s tariffs were sometimes played down, sometimes cheered but rarely seriously questioned by the right\u003c/p\u003e\u003cp\u003eWhile \u003ca href=\"https://www.theguardian.com/us-news/donaldtrump\"\u003eDonald Trump\u003c/a\u003e recently instituted and paused hefty tariffs, sparking a trade war and chaos in financial markets, most of the country’s conservative media either applauded the US president or critiqued the policy but not the person behind it, according to journalists and observers of conservative media.\u003c/p\u003e\u003cp\u003eMeanwhile, economists, business leaders, Democrats and even some Republicans warned that the tariffs, which prompted the largest \u003ca href=\"https://www.theguardian.com/business/2025/apr/08/how-liberation-day-rout-compares-with-other-notorious-stock-market-crises\"\u003eAmerican stock market drop\u003c/a\u003e since the start of the Covid-19 pandemic, could cause a recession.\u003c/p\u003e \u003ca href=\"https://www.theguardian.com/us-news/2025/apr/12/trump-tariffs-rightwing-media-fox-news\"\u003eContinue reading...\u003c/a\u003e","role":"user"}],"model":"mistralai/mistral-7b-instruct:free","temperature":0.7}
2025/04/12 17:59:33 [openrouter Request] POST URL: https://openrouter.ai/api/v1/chat/completions | Model in Payload: mistralai/mistral-7b-instruct:free
2025/04/12 17:59:33 [openrouter] Raw Response Status: 200 OK
2025/04/12 17:59:33 [openrouter] Raw Response Body: {"error":{"message":"Rate limit exceeded: free-models-per-day-high-balance. undefined","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"1000","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1744502400000"},"provider_name":"DeepInfra"}},"user_id":"user_2tlNqrUcoXTuRqBSm8wQR2mcHZy"}
2025/04/12 17:59:33 [LLM] ArticleID 1680 | Model mistralai/mistral-7b-instruct:free | PromptHash 9e4fff15493e3c2b | Parse error: no choices in outer LLM API response | Raw response: {"error":{"message":"Rate limit exceeded: free-models-per-day-high-balance. undefined","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"1000","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"174...
2025/04/12 17:59:33 Prompt snippet [9e4fff15493e3c2b] (attempt 2): Please analyze the political bias of the following article on a scale from -1.0 ...
2025/04/12 17:59:33 [openrouter Request] Headers: Content-Type=application/json, Authorization=Bearer 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...c49e
2025/04/12 17:59:33 [openrouter Request] Body: {"max_tokens":300,"messages":[{"content":"Please analyze the political bias of the following article on a scale from -1.0 (strongly left) to 1.0 (strongly right). Respond ONLY with a valid JSON object containing 'score', 'explanation', and 'confidence'. Do not include any other text or formatting.\n{\"score\": -1.0, \"explanation\": \"Strongly left-leaning language\", \"confidence\": 0.9}\n{\"score\": 0.0, \"explanation\": \"Neutral reporting\", \"confidence\": 0.95}\n{\"score\": 1.0, \"explanation\": \"Strongly right-leaning language\", \"confidence\": 0.9}\nArticle:\n\u003cp\u003eTrump’s tariffs were sometimes played down, sometimes cheered but rarely seriously questioned by the right\u003c/p\u003e\u003cp\u003eWhile \u003ca href=\"https://www.theguardian.com/us-news/donaldtrump\"\u003eDonald Trump\u003c/a\u003e recently instituted and paused hefty tariffs, sparking a trade war and chaos in financial markets, most of the country’s conservative media either applauded the US president or critiqued the policy but not the person behind it, according to journalists and observers of conservative media.\u003c/p\u003e\u003cp\u003eMeanwhile, economists, business leaders, Democrats and even some Republicans warned that the tariffs, which prompted the largest \u003ca href=\"https://www.theguardian.com/business/2025/apr/08/how-liberation-day-rout-compares-with-other-notorious-stock-market-crises\"\u003eAmerican stock market drop\u003c/a\u003e since the start of the Covid-19 pandemic, could cause a recession.\u003c/p\u003e \u003ca href=\"https://www.theguardian.com/us-news/2025/apr/12/trump-tariffs-rightwing-media-fox-news\"\u003eContinue reading...\u003c/a\u003e","role":"user"}],"model":"mistralai/mistral-7b-instruct:free","temperature":0.7}
2025/04/12 17:59:33 [openrouter Request] POST URL: https://openrouter.ai/api/v1/chat/completions | Model in Payload: mistralai/mistral-7b-instruct:free
2025/04/12 17:59:34 [openrouter] Raw Response Status: 200 OK
2025/04/12 17:59:34 [openrouter] Raw Response Body: {"error":{"message":"Rate limit exceeded: free-models-per-day-high-balance. undefined","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"1000","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1744502400000"},"provider_name":"DeepInfra"}},"user_id":"user_2tlNqrUcoXTuRqBSm8wQR2mcHZy"}
2025/04/12 17:59:34 [LLM] ArticleID 1680 | Model mistralai/mistral-7b-instruct:free | PromptHash 9e4fff15493e3c2b | Parse error: no choices in outer LLM API response | Raw response: {"error":{"message":"Rate limit exceeded: free-models-per-day-high-balance. undefined","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"1000","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"174...
2025/04/12 17:59:34 Prompt snippet [9e4fff15493e3c2b] (attempt 3): Please analyze the political bias of the following article on a scale from -1.0 ...
2025/04/12 17:59:34 [openrouter Request] Headers: Content-Type=application/json, Authorization=Bearer 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...c49e
2025/04/12 17:59:34 [openrouter Request] Body: {"max_tokens":300,"messages":[{"content":"Please analyze the political bias of the following article on a scale from -1.0 (strongly left) to 1.0 (strongly right). Respond ONLY with a valid JSON object containing 'score', 'explanation', and 'confidence'. Do not include any other text or formatting.\n{\"score\": -1.0, \"explanation\": \"Strongly left-leaning language\", \"confidence\": 0.9}\n{\"score\": 0.0, \"explanation\": \"Neutral reporting\", \"confidence\": 0.95}\n{\"score\": 1.0, \"explanation\": \"Strongly right-leaning language\", \"confidence\": 0.9}\nArticle:\n\u003cp\u003eTrump’s tariffs were sometimes played down, sometimes cheered but rarely seriously questioned by the right\u003c/p\u003e\u003cp\u003eWhile \u003ca href=\"https://www.theguardian.com/us-news/donaldtrump\"\u003eDonald Trump\u003c/a\u003e recently instituted and paused hefty tariffs, sparking a trade war and chaos in financial markets, most of the country’s conservative media either applauded the US president or critiqued the policy but not the person behind it, according to journalists and observers of conservative media.\u003c/p\u003e\u003cp\u003eMeanwhile, economists, business leaders, Democrats and even some Republicans warned that the tariffs, which prompted the largest \u003ca href=\"https://www.theguardian.com/business/2025/apr/08/how-liberation-day-rout-compares-with-other-notorious-stock-market-crises\"\u003eAmerican stock market drop\u003c/a\u003e since the start of the Covid-19 pandemic, could cause a recession.\u003c/p\u003e \u003ca href=\"https://www.theguardian.com/us-news/2025/apr/12/trump-tariffs-rightwing-media-fox-news\"\u003eContinue reading...\u003c/a\u003e","role":"user"}],"model":"mistralai/mistral-7b-instruct:free","temperature":0.7}
2025/04/12 17:59:34 [openrouter Request] POST URL: https://openrouter.ai/api/v1/chat/completions | Model in Payload: mistralai/mistral-7b-instruct:free
2025/04/12 17:59:34 [openrouter] Raw Response Status: 200 OK
2025/04/12 17:59:34 [openrouter] Raw Response Body: {"error":{"message":"Rate limit exceeded: free-models-per-day-high-balance. undefined","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"1000","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"1744502400000"},"provider_name":"DeepInfra"}},"user_id":"user_2tlNqrUcoXTuRqBSm8wQR2mcHZy"}
2025/04/12 17:59:34 [LLM] ArticleID 1680 | Model mistralai/mistral-7b-instruct:free | PromptHash 9e4fff15493e3c2b | Parse error: no choices in outer LLM API response | Raw response: {"error":{"message":"Rate limit exceeded: free-models-per-day-high-balance. undefined","code":429,"metadata":{"headers":{"X-RateLimit-Limit":"1000","X-RateLimit-Remaining":"0","X-RateLimit-Reset":"174...
2025/04/12 17:59:34 [LLM] ArticleID 1680 | Model mistralai/mistral-7b-instruct:free | Final failure after retries. Last error: no choices in outer LLM API response
2025/04/12 17:59:34 [reanalyzeHandler 1680] Model mistralai/mistral-7b-instruct:free scoring result: err=no choices in outer LLM API response
2025/04/12 17:59:34 [reanalyzeHandler 1680] Actual error received from ScoreWithModel for model mistralai/mistral-7b-instruct:free: (*errors.errorString) no choices in outer LLM API response
2025/04/12 17:59:34 [reanalyzeHandler 1680] Error scoring with model mistralai/mistral-7b-instruct:free, stopping analysis: no choices in outer LLM API response
2025/04/12 17:59:34 [reanalyzeHandler 1680] DEBUG: Sending general error to setProgress: no choices in outer LLM API response
[GIN] 2025/04/12 - 17:59:35 | 200 |     3.001261s |       127.0.0.1 | GET      "/api/llm/score-progress/1680"
exit status 0xc000013a
